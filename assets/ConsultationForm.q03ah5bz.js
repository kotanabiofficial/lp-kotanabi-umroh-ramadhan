import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Cd_vQiNd.js";const j=()=>{const[a,r]=i.useState({name:"",phone:"",message:""}),[m,p]=i.useState(!1),[o,d]=i.useState(null),[c,n]=i.useState(null),u="https://script.google.com/macros/s/AKfycbx7yCLegvMh3h_Pw40mjiEtGot490UvEnKwn7zZzMwAv4W7qZ1ULeE7r9NPSfn0U1L8/exec",h="628561500883",g=s=>{const l=s.target.value,t=l.replace(/\D/g,"");r({...a,phone:t}),t!==l?d("Hanya angka yang diperbolehkan."):t.length>0&&(t.length<8||t.length>15)?d("Nomor tidak valid (8-15 digit)."):d(null)},x=async s=>{if(s.preventDefault(),!a.name||!a.phone||!a.message){n({type:"error",message:"Mohon lengkapi semua data."});return}if(o){n({type:"error",message:"Mohon perbaiki format nomor telepon."});return}p(!0),n(null),window.dataLayer&&window.dataLayer.push({event:"konsultasi_submit",formName:"Consultation Form",user_data:{phone_number:a.phone,address:{first_name:a.name}}});const l=`Halo Admin KotaNabi,
Saya ingin konsultasi:

Nama: ${a.name}
No. WA: ${a.phone}
Pesan: ${a.message}

Terima kasih.`,t=`https://api.whatsapp.com/send?phone=${h}&text=${encodeURIComponent(l)}`;window.open(t,"_blank");const b={timestamp:new Date().toLocaleString("id-ID"),name:a.name,phone:a.phone,domicile:"-",package:"Konsultasi Umum",source:"Page Konsultasi",message:a.message};try{await fetch(u,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),n({type:"success",message:"Pesan terkirim! Silakan lanjutkan chat di WhatsApp."}),r({name:"",phone:"",message:""})}catch(f){console.error(f),n({type:"success",message:"Mengalihkan ke WhatsApp..."})}finally{p(!1)}};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-secondary p-6 md:p-8 text-white",children:[e.jsx("h3",{className:"text-2xl font-serif font-bold mb-2",children:"Formulir Konsultasi"}),e.jsx("p",{className:"opacity-90 text-sm",children:"Tanyakan apa saja seputar umroh & haji. Kami siap membantu Anda."})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"bg-white p-6 md:p-8 max-w-lg mx-auto",children:[c&&e.jsx("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${c.type==="success"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:c.message}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"Nama Anda",value:a.name,onChange:s=>r({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nomor WhatsApp"}),e.jsx("input",{type:"tel",required:!0,inputMode:"numeric",pattern:"[0-9]*",className:`w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition ${o?"border-red-500":"border-gray-300"}`,placeholder:"08123xxxx",value:a.phone,onChange:g}),o&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pesan / Pertanyaan"}),e.jsx("textarea",{required:!0,rows:4,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition resize-none",placeholder:"Tulis pertanyaan Anda disini...",value:a.message,onChange:s=>r({...a,message:s.target.value})})]}),e.jsx("button",{type:"submit",disabled:m,className:`w-full bg-primary hover:bg-yellow-600 text-white font-bold py-3.5 rounded-lg transition-all shadow-md hover:shadow-lg flex justify-center items-center ${m?"opacity-70 cursor-wait":""}`,children:m?e.jsx("span",{children:"Memproses..."}):e.jsxs("span",{className:"flex items-center gap-2",children:["Kirim Pesan",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})]})})]})]})})]})};export{j as default};
